<!DOCTYPE HTML>
<html>
<head>
    <!-- twitter bootstrap CSS stylesheet - not required by cornerstone -->
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container">

<h1>
WebGL Example
</h1>

This is a work-in-progress example of WebGL use in cornerstone

<br>
<br>

<div class="row">
    <div class="col-xs-2">
        <ul class="list-group">
            <a id="int16" class="list-group-item">Int 16</a>
            <a id="uint8" class="list-group-item">uint8</a>
            <a id="RGB" class="list-group-item">RGB</a>
        </ul>
    </div>
    <div class="col-xs-6">
        <div style="width:512px;height:512px;position:relative;display:inline-block;color:white;"
             oncontextmenu="return false"
             class='cornerstone-enabled-image'
             unselectable='on'
             onselectstart='return false;'
             onmousedown='return false;'>
            <div id="dicomImage"
                 style="width:512px;height:512px;top:0px;left:0px; position:absolute;">
            </div>
        </div>
    </div>
</div>

</div>
</body>

<!-- cornerstone depends on jQuery so it must be loaded first-->
<script src="../jquery.min.js"></script>

<!-- include the cornerstone library -->
<script src="../../dist/cornerstone.js"></script>

<!-- include special code for these examples which provides images -->
<script src="../dicomParser.js"></script>
<script src="../cornerstoneWADOImageLoader.js"></script>
<script src="../cornerstoneWebImageLoader.js"></script>

<script src="../cornerstoneMath.min.js"></script>
<script src="../cornerstoneTools.js"></script>

<script src="../exampleImageIdLoaderWebGL.js"></script>

<script>

    $(document).ready(function() {
        // CR
        //var imageId = 'dicomweb:http://cornerstonetech.org/images/ClearCanvas/CRStudy/1.3.51.5145.5142.20010109.1105627.1.0.1.dcm';
        //var imageId = 'dicomweb:http://jpx.jfpb.net/data/raw.dcm';
        var imageId= 'dicomweb:http://cornerstonetech.org/images/ClearCanvas/DXStudy/1.2.840.113619.2.67.2158294438.16324010109084338.243.dcm';
        
        // Uncomment the next line to load a uint8 greyscale image
        //var imageId = 'example://1';
        
        // Uncomment the next line to load an RGB image
        //var imageId = 'https://upload.wikimedia.org/wikipedia/commons/7/7d/Renal_Cell_Carcinoma.jpg';

        $("#RGB").on('click', function() {
            loadImage('https://upload.wikimedia.org/wikipedia/commons/7/7d/Renal_Cell_Carcinoma.jpg');
        })

        $("#uint8").on('click', function() {
            loadImage('example://1');
        })

        $("#int16").on('click', function() {
            loadImage('dicomweb:http://jpx.jfpb.net/data/raw.dcm');
        })

        function loadImage(imageId) {
            cornerstone.loadImage(imageId).then(function(image) {
                cornerstone.displayImage(element, image);
            });
        }

        var element = document.getElementById('dicomImage');
        cornerstone.enable(element);
        cornerstone.loadImage(imageId).then(function(image) {
            cornerstone.displayImage(element, image);

            cornerstoneTools.mouseInput.enable(element);
            cornerstoneTools.mouseWheelInput.enable(element);
            
            cornerstoneTools.wwwc.activate(element, 1);
            cornerstoneTools.pan.activate(element, 2);
            cornerstoneTools.zoom.activate(element, 4);
            cornerstoneTools.zoomWheel.activate(element);
        });
    });

</script>
</html>